<html>
	<head>
		<title>Prototype</title>
		<link rel="stylesheet" type="text/css" href="../interactiveSemantics/metadataRenderer.css"/>
         <script type="text/javascript" src="../interactiveSemantics/debi.js"></script>
         <script type="text/javascript" src="../interactiveSemantics/mice.js"></script>
         <script type="text/javascript" src="../interactiveSemantics/interfaceStyle.js"></script>
         <script type="text/javascript" src="exploratorySearchObject.js"></script>
         <script type="text/javascript" src="search.js"></script>
         <script type="text/javascript" src="searchSet.js"></script>
         <script type="text/javascript" src="expSearch.js"></script>
         <script type="text/javascript" src="history.js"></script>
         <script type="text/javascript" src="entry.js"></script>
         <script type="text/javascript" src="dragAndDrop.js"></script>
         <script type="text/javascript" src="record.js"></script>
         <script type="text/javascript" src="logging.js"></script>
         <script src="jquery-2.0.0.min.js"></script>
      
         <script type="text/javascript" src="../simpl/simplDeserializer.js"></script>
         <script type="text/javascript" src="../simpl/simplFieldTypes.js"></script>
         <script type="text/javascript" src="../simpl/simplGraphCollapse.js"></script>
         <script type="text/javascript" src="../simpl/simplGraphExpand.js"></script>
         <script type="text/javascript" src="../simpl/simplTypeScope.js"></script>
         <script type="text/javascript" src="../simpl/simplTypeScopeDeserialize.js"></script>
         <script type="text/javascript" src="../simpl/simplTypeScopeSerialize.js"></script>

        
    
    <script type="text/javascript" src="../semantics/MetaMetadataRepositoryLibrary.js"></script>
    <script type="text/javascript" src="../semantics/testRepository.js"></script>
         
         
         
		<link href="css/bootstrap.min.css" rel="stylesheet" type="text/css"></link>

		<link rel="stylesheet" type="text/css" href="prototype.css"/>
		
		  <script>
         
		  //englineList -> list of engines to search with
              //newExpSearch -> true if starting a new exploratory search
                function showMetadata(engineList,isNewExpSearch)
                 {
                   if (engineList.length < 1){
                   		return;
                   }
                   var query = document.getElementById("targetURL").value;
                  
                   var content = document.getElementById("content");
				
					var time = new Date().getTime();
				    eventObj = {
				  		add_query: {
				  			query: query,
				  			timestamp: time,
				  			search_engines: engineList
				  		}
				  	};
				  	
				    TheRecord.addEvent(eventObj);
                    ExpSearchApp.addQuery(query, engineList);
                }
            
            function onEnterShowMetadata(event)
            {
                if(event.keyCode == 13)
                	showMetadata(ExpSearchApp.getEngines());
            }
            
            function logEngineToggle(event){
            	var checkbox = event.target;
            	var checked = checkbox.checked;
            	var engine = checkbox.getAttribute("name");
				//logging
				var time = new Date().getTime();
				eventObj = {
					engine_toggle: {
				  		engine_name: engine,
				  		turning_on: checked,
				  		timestamp: time
				  	}
				 };
				 TheRecord.addEvent(eventObj);
			}
         </script>
	</head>
	<body>
		<div id="controls" class="navbar navbar-inverse navbar-default">
          <div class="navbar-inner">
            <div class="container">
              <form class="navbar-form pull-left form-inline" onsubmit="return false;">
                
                <!-- So around her, I might change logic to regex the search terms into a google search and pass that URL
                	to the metadata renderer-->
              
                <input id="targetURL" type="text" class="span5"
                  size="500" style="height: 30px;" placeholder="Enter Search Term"
                  onkeydown="onEnterShowMetadata(event);"/>
                <input type="button" class="btn" value="Add Query"
                  onclick="showMetadata(ExpSearchApp.getEngines());"/>
                 <input type="button" class="btn" value="New Exploratory Search"
                  onclick="ExpSearchApp.newExpSearch(event);"  margin-right:10px"/> 
                <div class = "checkBoxGroup">
	                <div class="checkbox ">
	                  <label>
	                    <input type="checkbox" class="searchToggle" name="google_search" checked="true" value="true" onclick="logEngineToggle(event)"> Google
	                    
	                 </label>
	                </div>
	                <div class="checkbox ">
	                  <label>
	                    <input type="checkbox" class="searchToggle" name="bing_search_xpath" value="true" onclick="logEngineToggle(event)"> Bing
	                 </label>
	                </div>
	                 <div class="checkbox ">
                      <label>
                        <input type="checkbox" class="searchToggle" name="acm_portal_search" value="true" onclick="logEngineToggle(event)"> ACM
                     </label>
                    </div>
                    <div class="checkbox ">
                      <label>
                        <input type="checkbox" class="searchToggle" name="google_scholar_search" value="true" onclick="logEngineToggle(event)"> Google Scholar
                        
                     </label>
                    </div>
                    <div class="checkbox ">
                      <label>
                        <input type="checkbox" class="searchToggle" name="research_gate" value="true" onclick="logEngineToggle(event)"> ResearchGate
                        
                     </label>
                    </div>
                </div>
               
                  
                  
            </form>
             
                  
                  
              <div class="brand" style="float: right; margin-right: 500px;">Exploratory Search prototype</div>
              
          </div>
          </div>
		</div>
		<div class="main" style="margin-top: -8px; margin-left:8px">
		<div class="column history" style=" width: 30%; float: left">
		  <div id="history_bar" class="historyRendering">
		      <div class="headerRow">History</div>
		  </div>
		  <div class="historyContainer"></div> 
		</div>
		
		<div class="column" style="width: 35%; float: left">
          <div id="content" class="expRendering">
          
        <a href="https://www.google.com/search?q=search" engine ="google_search" query="exploratory search"> </a>     
          </div>
        </div>
          <div class="column comparison" id="comp" style="width: 35%">
          <div class="comparisonContainer" ondragover="comparisonDragOver(event)" ondrop="comparisonDrop(event)" ondragenter="comparisonDragEnter(event)" ondragleave="comparisonDragLeave(event)">
          <span class="dragCenteringMechanism">
            <span class="dragHint">Drag a history entry here</span>
          </span>
             
      
          </div>
        </div>
       
        </div>
	
	    <script>
	    ExpSearchApp.initialize();
	    </script>
	</body>
</html>
